<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>$ResultMap.systemName - 商品购买</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/WEB-ROOT/front/index/index105/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/WEB-ROOT/front/index/index105/assets/css/fontawesome-all.css">
    <link rel="stylesheet" href="/WEB-ROOT/front/index/index105/assets/css/flaticon.css">
    <link rel="stylesheet" href="/WEB-ROOT/front/index/index105/assets/css/animate.css">
    <link rel="stylesheet" href="/WEB-ROOT/front/index/index105/assets/css/jquery.mCustomScrollbar.min.css">
    <link rel="stylesheet" href="/WEB-ROOT/front/index/index105/assets/css/slick.css">
    <link rel="stylesheet" href="/WEB-ROOT/front/index/index105/assets/css/slick-theme.css">
    <link rel="stylesheet" href="/WEB-ROOT/front/index/index105/assets/css/style.css">
    <style>
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .product-card {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .product-info {
            padding: 15px;
        }
        .product-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
            height: 40px;
            overflow: hidden;
        }
        .product-price {
            color: #f15025;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
        }
        .product-stock {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        .add-to-cart {
            display: block;
            width: 100%;
            background: #76A713;
            color: white;
            border: none;
            padding: 8px 0;
            border-radius: 4px;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .add-to-cart:hover {
            background: #619000;
        }
        .category-filter {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        .category-filter a {
            padding: 5px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            color: #333;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .category-filter a:hover,
        .category-filter a.active {
            background: #76A713;
            color: white;
            border-color: #76A713;
        }
    </style>
</head>

<body class="organio-wrapper">
<div id="preloader"></div>
<div class="up">
    <a href="#" class="scrollup text-center"><i class="fas fa-chevron-up"></i></a>
</div>

<header id="organio-header" class="organio-header-section header-style-three">
    <div class="or-header-top">
        <div class="container">
            <div class="or-header-top-content d-flex justify-content-between align-items-center">
                <div class="or-header-top-slug">
                    欢迎访问本平台 &nbsp;welcome to our system
                </div>
                <div class="or-header-top-social">
                    <a href="#"><i class="fab fa-qq"></i></a>
                    <a href="#"><i class="fab fa-weibo"></i></a>
                    <a href="#"><i class="fab fa-weixin"></i></a>
                    <a href="#"><i class="fas fa-envelope"></i></a>
                </div>
                <div class="or-header-top-login-btn position-relative">

                    #if( $ResultMap.login_user_acct == "" )
                    <a href="$ResultMap.LOG_SUCC_GO2_FRONT">用户登录</a>
                    #else
                    <a href="$ResultMap.LOG_SUCC_GO2_APP">你好！$ResultMap.login_user_acct，&nbsp;&nbsp;进入管理</a>
                    #end

                </div>
            </div>
        </div>
    </div>
    <div class="or-header-main-menu">
        <div class="container">
            <div class="or-header-main-menu-content d-flex justify-content-between align-items-center">
                <div class="site-logo">
                    <a href="/WEB-ROOT/front/index/index.do"> <b><font size="5">$ResultMap.systemName</font></b> </a>
                </div>
                <div class="or-header-main-navigation-btn d-flex">
                    <nav class="main-navigation-area clearfix ul-li">
                        <ul class="menu-navigation">
                            <li><a href="/WEB-ROOT/front/index/index.do">HOME</a></li>
                            <li><a href="/WEB-ROOT/front/index/index.do?flag=shop" class="active">商品购买</a></li>
                            <li><a href="/WEB-ROOT/front/index/index.do?flag=cart">购物车</a></li>
                            <li><a href="/WEB-ROOT/front/index/index.do?flag=about">平台介绍</a></li>
                            <li class="dropdown">
                                <a href="#">所有分类</a>
                                <ul class="dropdown-menu clearfix">
                                    #foreach( $fenlei in $ResultMap.fenlei )
                                    <li><a href="/WEB-ROOT/front/index/index.do?flag=category&fenlei=$fenlei.fenleimingchen">$fenlei.fenleimingchen</a></li>
                                    #end
                                </ul>
                            </li>
                            <li><a href="/WEB-ROOT/front/index/index.do?flag=contact">在线服务</a></li>
                        </ul>
                    </nav>
                    <div class="or-header-right-btn">
                        <button class="search-box-outer"><i class="fas fa-search"></i></button>
                    </div>
                </div>
            </div>
            <div class="mobile_menu position-relative">
                <div class="mobile_menu_button open_mobile_menu">
                    <i class="fal fa-bars"></i>
                </div>
                <div class="mobile_menu_wrap">
                    <div class="mobile_menu_overlay open_mobile_menu"></div>
                    <div class="mobile_menu_content">
                        <div class="mobile_menu_close open_mobile_menu">
                            <i class="fal fa-times"></i>
                        </div>
                        <div class="m-brand-logo">
                        </div>
                        <div class="mobile-search-wrapper position-relative">
                            <form id="searchForm">
                                <input id="mingchenbiaoti" type="text" placeholder="输入查询关键字">
                                <button onclick="doSearch();"><i class="fas fa-search"></i></button>
                            </form>
                        </div>
                        <nav class="mobile-main-navigation  clearfix ul-li">
                            <ul id="m-main-nav" class="navbar-nav text-capitalize clearfix">
                                <li><a href="/WEB-ROOT/front/index/index.do">HOME</a></li>
                                <li><a href="/WEB-ROOT/front/index/index.do?flag=shop" class="active">商品购买</a></li>
                                <li><a href="/WEB-ROOT/front/index/index.do?flag=cart">购物车</a></li>
                                <li><a href="/WEB-ROOT/front/index/index.do?flag=about">平台介绍</a></li>
                                <li class="dropdown">
                                    <a href="#">所有分类</a>
                                    <ul class="dropdown-menu clearfix">
                                        #foreach( $fenlei in $ResultMap.fenlei )
                                        <li><a href="/WEB-ROOT/front/index/index.do?flag=category&fenlei=$fenlei.fenleimingchen">$fenlei.fenleimingchen</a></li>
                                        #end
                                    </ul>
                                </li>
                                <li><a href="/WEB-ROOT/front/index/index.do?flag=contact">在线服务</a></li>
                                <li>

                                    #if( $ResultMap.login_user_acct == "" )
                                    <a href="$ResultMap.LOG_SUCC_GO2_FRONT"> <strong><b><font color="#76A713" size="3">用户登录</font></b></strong> </a>
                                    #else
                                    <a href="$ResultMap.LOG_SUCC_GO2_APP"> <strong><b><font color="#76A713" size="3">你好！$ResultMap.login_user_acct，&nbsp;&nbsp;进入管理</font></b></strong></a>
                                    #end

                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<div class="search-popup">
    <button class="close-search style-two"><span class="fal fa-times"></span></button>
    <button class="close-search"><span class="fa fa-arrow-up"></span></button>
    <form id="searchForm1">
        <div class="form-group">
            <input type="search" id="mingchenbiaoti1" placeholder="输入查询关键字" required="">
            <button type="button" onclick="doSearch1();"><i class="fa fa-search"></i></button>
        </div>
    </form>
</div>

<section id="or-page-title" class="or-page-title-section position-relative" data-background="/WEB-ROOT/front/index/index105/assets/img/bg/page-title-bg.jpg">
    <div class="or-page-title-content text-center">
        <div class="container">
            <div class="or-page-title-text headline">
                <h1>商品购买</h1>
                <ul>
                    <li><a href="/WEB-ROOT/front/index/index.do">首页</a></li>
                    <li>商品列表</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section id="or-shop-page" class="or-shop-page-section pt-100 pb-100">
    <div class="container">
        <div class="category-filter">
            <a href="/WEB-ROOT/front/index/index.do?flag=shop" class="active">全部商品</a>
            #if( $ResultMap.fenlei )
            #foreach( $fenlei in $ResultMap.fenlei )
            <a href="/WEB-ROOT/front/index/index.do?flag=shop&fenlei=$fenlei.shangpinleixing">$fenlei.shangpinleixing</a>
            #end
            #end
        </div>

        <div class="product-grid">
            #if( $ResultMap.getProducts && $ResultMap.getProducts.size() > 0 )
            #foreach( $product in $ResultMap.getProducts )
            <div class="product-card">
                #if( $product.imgList && $product.imgList.size() > 0 )
                #set( $firstImage = $product.imgList.get(0) )
                <img src="$firstImage.picPath" alt="$product.shangpinmingcheng" class="product-image">
                #else
                <img src="/WEB-ROOT/front/skin/images/product-default.jpg" alt="$product.shangpinmingcheng" class="product-image">
                #end
                <div class="product-info">
                    <div class="product-title">$product.shangpinmingcheng</div>
                    <div class="product-price">￥$product.xiaoshoujiage</div>
                    <div class="product-stock">库存: $product.kucunliang</div>
                    <button class="add-to-cart" data-huohao="$product.huohao">加入购物车</button>
                </div>
            </div>
            #end
            #else
            <div class="text-center py-5">
                <h3>暂无商品</h3>
                <p>请稍后再来查看</p>
            </div>
            #end
        </div>
    </div>
</section>

<footer id="or-footer-1" class="or-footer-section-1" data-background="/WEB-ROOT/front/index/index105/assets/img/bg-footer-top.png">
    <div class="or-footer-newslatter-1">
        <div class="container">
            <div class="or-footer-newslatter-content headline  position-relative" data-background="">
                <span class="or-footer-newslatter-img"></span>
                <div class="or-footer-newslatter-text-form">
                    <h3> <a href="/servlet/RegisterServlet"> <b><font size="5" color="white">成为平台用户，点我注册！</font></b>  </a> </h3>
                </div>
            </div>
        </div>
    </div>
    <div class="or-footer-widget-wrapper-1">
        <div class="container">
            <div class="row">

                #foreach( $lm in $ResultMap.lanmu )
                <div class="col-lg-3 col-md-6">
                    <div class="or-footer-widget  headline pera-content ul-li-block">
                        <div class="or-menu-widget">
                            <h2 class="widget-title">$lm.lanmumingcheng</h2>
                            <ul>
                                #foreach( $wz in $lm.wenzhang )
                                <li><a href="/WEB-ROOT/front/index/index.do?flag=wenzhang&id=$wz.id">$wz.wenzhangbiaoti</a></li>
                                #end
                            </ul>
                        </div>
                    </div>
                </div>
                #if(${velocityCount}==4) #break #end #end

            </div>
        </div>
    </div>
    <div class="or-footer-copyright text-center" data-background="/WEB-ROOT/front/index/index105/assets/img/bg-footer-bottom.png">
        <span>   <a href="/WEB-ROOT/front/index/index.do"> <b><font size="4" color="white">$ResultMap.systemName</font></b></a> </span>
    </div>
</footer>

<script src="/WEB-ROOT/front/index/index105/assets/js/jquery.min.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/bootstrap.min.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/popper.min.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/jquery.magnific-popup.min.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/appear.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/slick.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/jquery.counterup.min.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/waypoints.min.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/wow.min.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/imagesloaded.pkgd.min.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/parallax-scroll.js"></script>
<script src="/WEB-ROOT/front/index/index105/assets/js/script.js"></script>

<script>
    $(document).ready(function() {
        // 添加到购物车
        $('.add-to-cart').click(function() {
            var huohao = $(this).data('huohao');

            // 判断是否登录
            var loginStatus = '#if($ResultMap.login_user_acct == "")false#{else}true#end';

            if(loginStatus !== 'true') {
                alert('请先登录！');
                window.location.href = '$ResultMap.LOG_SUCC_GO2_FRONT';
                return;
            }

            $.ajax({
                url: 'index.do?flag=addToCart',
                type: 'POST',
                data: {
                    huohao: huohao,
                    quantity: 1
                },
                success: function(response) {
                    alert(response);
                },
                error: function() {
                    alert('操作失败，请重试');
                }
            });
        });

        // 激活当前分类
        var urlParams = new URLSearchParams(window.location.search);
        var fenlei = urlParams.get('fenlei');
        if(fenlei) {
            $('.category-filter a').removeClass('active');
            $('.category-filter a[href="/WEB-ROOT/front/index/index.do?flag=shop&fenlei=' + fenlei + '"]').addClass('active');
        }
    });
</script>
</body>
</html>